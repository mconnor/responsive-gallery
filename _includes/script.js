function checkViewport(){var a=$(".photos").width(),b=$(".thumbnail_container").width(),c=$(".thumbnail_container a.thumbnail:first-child").outerWidth();b>a&&positionThumbnails(),a-c>b&&positionThumbnails()}function sortThumbnails(a){$(".thumbnail_container a.thumbnail").each(function(){var b=$(this).attr("data-keywords");"all"==a?$(this).addClass("showMe").removeClass("hideMe").attr("rel","group"):-1!=b.indexOf(a)?$(this).addClass("showMe").removeClass("hideMe").attr("rel","group"):$(this).addClass("hideMe").removeClass("showMe").attr("rel","none")}),positionThumbnails()}function positionThumbnails(){console.log("positionThumbnails"),$(".thumbnail_container a.thumbnail.hideMe").animate({opacity:0},500,function(){$(this).css({display:"none",top:"0px",left:"0px"})});var a=$(".photos").width(),b=0,c=0,d=$("a.thumbnail img:first-child").outerWidth()+window.thumbnailSpacing,e=$("a.thumbnail img:first-child").outerHeight()+window.thumbnailSpacing,f=Math.floor(a/d);$(".thumbnail_container  a.thumbnail.showMe").each(function(a){var g=a%f/100;0==g?(0!=a&&(b+=e),c=0):c+=d,$(this).css("display","block").animate({opacity:1,top:b+"px",left:c+"px"},500);var h=f*d,i=b+e;$(".thumbnail_container").css({width:h+"px",height:i+"px"})}),detectFancyBoxLinks();var g=$(".thumbnail_container").width()/d,h=g*d-window.thumbnailSpacing;$(".sorting").css({width:h+"px"})}function detectFancyBoxLinks(){console.log("detectFancyBoxLinks"),$("a.fancybox").unbind("click.fb"),$("a.fancybox-media").unbind("click.fb");var a=$(".thumbnail_container a.thumbnail");$(window).width()<550?a.removeClass("fancybox").attr("target","_blank"):(a.removeAttr("target"),a.addClass("fancybox")),$('a.fancybox[rel="group"]').fancybox({transitionIn:"elastic",transitionOut:"elastic",titlePosition:"over",openSpeed:500,overlayColor:"#000",padding:0,overlayOpacity:75,helpers:{media:{}}})}var thumbnailSpacing=15;$(document).ready(function(){$("a.sortLink").on("click",function(a){a.preventDefault(),$("a.sortLink").removeClass("selected"),$(this).addClass("selected");var b=$(this).attr("data-keyword");sortThumbnails(b)}),$(".gallery .sorting").css("margin-bottom",window.thumbnailSpacing+"px"),$(".thumbnail_container a.thumbnail").addClass("showMe").addClass("fancybox").attr("rel","group"),$(".thumbnail_container a.thumbnailVideo").addClass("showMe").addClass("fancybox-media").attr("rel","group"),positionThumbnails(),setInterval("checkViewport()",750),$(".various").fancybox({maxWidth:800,maxHeight:600,fitToView:!1,width:"70%",height:"70%",autoSize:!1,closeClick:!1,openEffect:"none",closeEffect:"none"}),$(".fancybox-media").fancybox({openEffect:"none",closeEffect:"none",helpers:{media:{}}})});